<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dot-world - 2Dドット絵ゲーム</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="ui-overlay">
            <span id="controls-hint"></span>
        </div>
    </div>

    <!-- 1. 基本定数 -->
    <script src="js/constants.js"></script>

    <!-- 2. 共通ユーティリティ -->
    <script src="js/shared/utils.js"></script>

    <!-- 3. コアシステム（周回非依存） -->
    <script src="js/core/assets.js"></script>
    <script src="js/core/effects.js"></script>
    <script src="js/core/input.js"></script>
    <script src="js/core/draw.js"></script>
    <script src="js/core/camera.js"></script>
    <script src="js/core/message.js"></script>

    <!-- ========================================= -->
    <!-- 4. 1週目専用（loop1） -->
    <!-- ========================================= -->

    <!-- 4.1 データ定義 -->
    <script src="js/loop1/data/magic.js"></script>
    <script src="js/loop1/data/enemies.js"></script>
    <script src="js/loop1/data/items.js"></script>

    <!-- 4.2 状態管理 -->
    <script src="js/loop1/world.js"></script>
    <script src="js/loop1/inventory.js"></script>
    <script src="js/loop1/quest.js"></script>
    <script src="js/loop1/player.js"></script>
    <script src="js/loop1/checkpoint.js"></script>

    <!-- 4.3 UI -->
    <script src="js/loop1/systems/menu.js"></script>
    <script src="js/loop1/systems/shop.js"></script>
    <script src="js/loop1/systems/inn.js"></script> <!-- Inn System -->
    <script src="js/loop1/systems/gameover.js?v=7"></script>

    <!-- 4.4 マップ -->
    <script src="js/loop1/systems/maps/chests.js"></script>
    <!-- マップデータ（個別ファイル） -->
    <script src="js/loop1/systems/maps/data/helper.js"></script>
    <script src="js/loop1/systems/maps/data/village.js"></script>
    <script src="js/loop1/systems/maps/data/east.js"></script>
    <script src="js/loop1/systems/maps/data/west.js"></script>
    <script src="js/loop1/systems/maps/data/north.js"></script>
    <script src="js/loop1/systems/maps/data/south.js"></script>
    <script src="js/loop1/systems/maps/data/demon.js"></script>
    <!-- マップローダー -->
    <script src="js/loop1/systems/maps/data.js"></script>
    <script src="js/loop1/systems/maps/manager.js"></script>

    <!-- 4.6 イベント -->
    <script src="js/loop1/systems/opening.js"></script>
    <script src="js/loop1/systems/loop1_ending.js"></script>

    <!-- 4.5 戦闘 -->
    <script src="js/loop1/systems/battle/actions.js"></script>
    <script src="js/loop1/systems/battle/magic.js"></script>
    <script src="js/loop1/systems/battle/items.js"></script>
    <script src="js/loop1/systems/battle/render.js"></script>
    <script src="js/loop1/systems/battle/core.js"></script>

    <!-- ========================================= -->
    <!-- 5. 2週目専用（loop2） -->
    <!-- ========================================= -->

    <!-- 5.1 データ定義 -->
    <!-- 削除: enemies.js -->

    <!-- 5.2 状態管理 -->
    <script src="js/loop2/world.js"></script>
    <script src="js/loop2/player.js"></script>
    <!-- 削除: companions.js -->
    <script src="js/loop2/party.js?v=7"></script>
    <!-- 削除: weapon.js -->
    <script src="js/loop2/quest.js?v=7"></script>

    <!-- 5.3 バトル -->
    <!-- 5.3 バトル UI -->
    <script src="js/loop2/systems/menu.js?v=7"></script>
    <script src="js/loop2/systems/battle/core.js"></script>

    <!-- 5.4 マップデータ -->
    <script src="js/loop2/systems/maps/modern/start.js?v=7"></script>
    <!-- 削除: 他マップ -->
    <script src="js/loop2/systems/maps/loader.js"></script>

    <!-- 6. メインゲーム -->
    <!-- 5.5 リファクタリング済みステート -->
    <script src="js/core/save_system.js?v=7"></script>
    <script src="js/core/state_machine.js"></script>
    <script src="js/states/base_state.js"></script>
    <script src="js/systems/map_renderer.js"></script>
    <script src="js/systems/player_controller.js?v=7"></script>

    <script src="js/states/title_state.js?v=7"></script>
    <script src="js/states/playing_state.js"></script>
    <script src="js/states/menu_state.js"></script>
    <script src="js/states/dialog_state.js"></script>
    <script src="js/states/battle_state.js"></script>
    <script src="js/states/shop_state.js"></script>
    <script src="js/states/inn_state.js"></script>
    <script src="js/states/gameover_state.js"></script>
    <script src="js/states/opening_state.js"></script>
    <script src="js/states/ending_state.js"></script>
    <script src="js/states/loop1_ending_state.js"></script>

    <!-- 6. メインゲーム -->
    <script src="js/main.js"></script>
</body>

</html>